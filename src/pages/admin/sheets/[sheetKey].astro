---
import AdminTray from 'src/components/svelte/admin/AdminTray.svelte';
import SheetEditor from 'src/components/svelte/admin/sheets/SheetEditor.svelte';
import PageWithTray from 'src/layouts/PageWithTray.astro';

const visible = import.meta.env.SECRET_FEATURE_FLAG_Admin_tools === 'true';

// Get the sheet builder key from the URL parameters
// Default to 'test-sheet-builder' if not provided
const { sheetKey = 'test-sheet-builder' } = Astro.params;
---
<PageWithTray title="Characters: Sheet Editor" description="Edit character sheets for the Character Builder.">
  <AdminTray client:only="svelte" slot="app-tray" showLocalTools={visible} /> 
  <SheetEditor {sheetKey} client:only="svelte" />
</PageWithTray>