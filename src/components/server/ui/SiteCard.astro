---
import SiteOwnerToken from 'src/components/svelte/sites/SiteOwnerToken.svelte';
import type { Site } from 'src/schemas/SiteSchema';
import { toDisplayString } from 'src/utils/contentHelpers';
import { systemToNoun } from 'src/utils/schemaHelpers';

interface Props {
  site: Site;
}
const { site } = Astro.props;
---

<cn-card
  href={`/sites/${site.key}`}
  noun={systemToNoun(site.system)}
  title={site.name}
  cover={site.posterURL || undefined}
  >
  <p class="downscaled">{site.description}</p>

  <div slot="actions" class="toolbar">
    <SiteOwnerToken {site} client:only="svelte"/>
    <div class="grow"></div>
    <p>{toDisplayString(site.flowTime)}</p>
  </div>

  <slot />
</cn-card>